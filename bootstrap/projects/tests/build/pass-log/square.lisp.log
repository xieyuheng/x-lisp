;;; Input

(export square)

(define (square x) (imul x x))

;;; ShrinkPass

(export square)

(define (square x) (imul x x))

;;; UniquifyPass

(export square)

(define (square x) (imul x x))

;;; RevealFunctionPass

(export square)

(define (square x) ((@function imul 2) x x))

;;; LiftLambdaPass

(export square)

(define (square x) ((@function imul 2) x x))

;;; UnnestOperandPass

(export square)

(define (square x) (@let1 _₁ (@function imul 2) (_₁ x x)))

;;; ExplicateControlPass

(export square)

(define-function square
  (block entry
    (= x (argument 0))
    (= _₁ (const (@function imul 2)))
    (= _↩ (apply _₁ x x))
    (return _↩)))

