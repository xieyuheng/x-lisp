Input:

    (define (square x) (imul x x))
    
    (define (main) (square (square 3)))

ShrinkPass:

    (define (square x) (imul x x))
    
    (define (main) (square (square 3)))

UniquifyPass:

    (define (square x) (imul x x))
    
    (define (main) (square (square 3)))

RevealFunctionPass:

    (define (square x) ((@function imul 2) x x))
    
    (define (main) ((@function square 1) ((@function square 1) 3)))

LiftLambdaPass:

    (define (square x) ((@function imul 2) x x))
    
    (define (main) ((@function square 1) ((@function square 1) 3)))

UnnestOperandPass:

    (define (square x) (@let1 _₁ (@function imul 2) (_₁ x x)))
    
    (define (main)
      (@let1 _₁ (@function square 1)
        (@let1 _₂ (@function square 1)
          (@let1 _₃ 3 (@let1 _₄ (_₂ _₃) (_₁ _₄))))))

ExplicateControlPass:

    (define-function square (block entry))
    
    (define-function main (block entry))

