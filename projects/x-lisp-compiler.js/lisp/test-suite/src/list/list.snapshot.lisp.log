;;; Input

(define (main)
  (= list (make-list))
  (list-push! 1 list)
  (list-push! 2 list)
  (list-push! 3 list)
  (println list)
  (println [1 2 3])
  (println '(1 2 3))
  (println [1 2 3])
  (println [1 2 3])
  (println ['a 'b 'c])
  (println '(a b c)))

;;; Loaded

(define (main)
  (= list (make-list))
  (list-push! 1 list)
  (list-push! 2 list)
  (list-push! 3 list)
  (println list)
  (println [1 2 3])
  (println '(1 2 3))
  (println [1 2 3])
  (println [1 2 3])
  (println ['a 'b 'c])
  (println '(a b c)))

;;; ShrinkPass

(define (main)
  (= list (make-list))
  (list-push! 1 list)
  (list-push! 2 list)
  (list-push! 3 list)
  (println list)
  (println
   (begin
     (= tael (make-list))
     (list-push! 1 tael)
     (list-push! 2 tael)
     (list-push! 3 tael)
     tael))
  (println
   (begin
     (= tael (make-list))
     (list-push! 1 tael)
     (list-push! 2 tael)
     (list-push! 3 tael)
     tael))
  (println
   (begin
     (= tael (make-list))
     (list-push! 1 tael)
     (list-push! 2 tael)
     (list-push! 3 tael)
     tael))
  (println
   (begin
     (= tael (make-list))
     (list-push! 1 tael)
     (list-push! 2 tael)
     (list-push! 3 tael)
     tael))
  (println
   (begin
     (= tael (make-list))
     (list-push! 'a tael)
     (list-push! 'b tael)
     (list-push! 'c tael)
     tael))
  (println
   (begin
     (= tael (make-list))
     (list-push! 'a tael)
     (list-push! 'b tael)
     (list-push! 'c tael)
     tael)))

;;; UniquifyPass

(define (main)
  (= list₁ (make-list))
  (list-push! 1 list₁)
  (list-push! 2 list₁)
  (list-push! 3 list₁)
  (println list₁)
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 'a tael₁)
     (list-push! 'b tael₁)
     (list-push! 'c tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 'a tael₁)
     (list-push! 'b tael₁)
     (list-push! 'c tael₁)
     tael₁)))

;;; RevealGlobalPass

(define (main)
  (= list₁ (make-list))
  (list-push! 1 list₁)
  (list-push! 2 list₁)
  (list-push! 3 list₁)
  (println list₁)
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 'a tael₁)
     (list-push! 'b tael₁)
     (list-push! 'c tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 'a tael₁)
     (list-push! 'b tael₁)
     (list-push! 'c tael₁)
     tael₁)))

;;; LiftLambdaPass

(define (main)
  (= list₁ (make-list))
  (list-push! 1 list₁)
  (list-push! 2 list₁)
  (list-push! 3 list₁)
  (println list₁)
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 1 tael₁)
     (list-push! 2 tael₁)
     (list-push! 3 tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 'a tael₁)
     (list-push! 'b tael₁)
     (list-push! 'c tael₁)
     tael₁))
  (println
   (begin
     (= tael₁ (make-list))
     (list-push! 'a tael₁)
     (list-push! 'b tael₁)
     (list-push! 'c tael₁)
     tael₁)))

;;; UnnestOperandPass

(define (main)
  (= list₁ (make-list))
  (list-push! 1 list₁)
  (list-push! 2 list₁)
  (list-push! 3 list₁)
  (println list₁)
  (begin
    (= tael₁ (make-list))
    (list-push! 1 tael₁)
    (list-push! 2 tael₁)
    (list-push! 3 tael₁)
    (println tael₁))
  (begin
    (= tael₁ (make-list))
    (list-push! 1 tael₁)
    (list-push! 2 tael₁)
    (list-push! 3 tael₁)
    (println tael₁))
  (begin
    (= tael₁ (make-list))
    (list-push! 1 tael₁)
    (list-push! 2 tael₁)
    (list-push! 3 tael₁)
    (println tael₁))
  (begin
    (= tael₁ (make-list))
    (list-push! 1 tael₁)
    (list-push! 2 tael₁)
    (list-push! 3 tael₁)
    (println tael₁))
  (begin
    (= tael₁ (make-list))
    (list-push! 'a tael₁)
    (list-push! 'b tael₁)
    (list-push! 'c tael₁)
    (println tael₁))
  (= tael₁ (make-list))
  (list-push! 'a tael₁)
  (list-push! 'b tael₁)
  (list-push! 'c tael₁)
  (println tael₁))

