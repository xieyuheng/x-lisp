;;; Input

(claim main (-> void-t))

(define (main) (assert-equal [:x 'a :y 'b] '(:x a :y b)))

;;; Loaded

(claim main (-> void-t))

(define (main) (assert-equal [:x 'a :y 'b] '(:x a :y b)))

;;; ShrinkPass

(claim main (-> void-t))

(define (main)
  (assert-equal
    (begin
      (= tael (make-list))
      (record-put! 'x 'a tael)
      (record-put! 'y 'b tael)
      tael)
    (begin
      (= tael (make-list))
      (record-put! 'x 'a tael)
      (record-put! 'y 'b tael)
      tael)))

;;; UniquifyPass

(claim main (-> void-t))

(define (main)
  (assert-equal
    (begin
      (= tael₁ (make-list))
      (record-put! 'x 'a tael₁)
      (record-put! 'y 'b tael₁)
      tael₁)
    (begin
      (= tael₁ (make-list))
      (record-put! 'x 'a tael₁)
      (record-put! 'y 'b tael₁)
      tael₁)))

;;; LiftLambdaPass

(claim main (-> void-t))

(define (main)
  (assert-equal
    (begin
      (= tael₁ (make-list))
      (record-put! 'x 'a tael₁)
      (record-put! 'y 'b tael₁)
      tael₁)
    (begin
      (= tael₁ (make-list))
      (record-put! 'x 'a tael₁)
      (record-put! 'y 'b tael₁)
      tael₁)))

;;; UnnestOperandPass

(claim main (-> void-t))

(define (main)
  (= tael₁ (make-list))
  (record-put! 'x 'a tael₁)
  (record-put! 'y 'b tael₁)
  (= tael₁ (make-list))
  (record-put! 'x 'a tael₁)
  (record-put! 'y 'b tael₁)
  (assert-equal tael₁ tael₁))

