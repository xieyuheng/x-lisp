;;; Input

(claim main (-> void-t))

(define (main) (assert-equal {1 2 3} {1 2 3}))

;;; Loaded

(define (main) (assert-equal {1 2 3} {1 2 3}))

;;; ShrinkPass

(define (main)
  (assert-equal
    (begin
      (= set (make-set))
      (set-add! 1 set)
      (set-add! 2 set)
      (set-add! 3 set)
      set)
    (begin
      (= set (make-set))
      (set-add! 1 set)
      (set-add! 2 set)
      (set-add! 3 set)
      set)))

;;; UniquifyPass

(define (main)
  (assert-equal
    (begin
      (= set₁ (make-set))
      (set-add! 1 set₁)
      (set-add! 2 set₁)
      (set-add! 3 set₁)
      set₁)
    (begin
      (= set₁ (make-set))
      (set-add! 1 set₁)
      (set-add! 2 set₁)
      (set-add! 3 set₁)
      set₁)))

;;; LiftLambdaPass

(define (main)
  (assert-equal
    (begin
      (= set₁ (make-set))
      (set-add! 1 set₁)
      (set-add! 2 set₁)
      (set-add! 3 set₁)
      set₁)
    (begin
      (= set₁ (make-set))
      (set-add! 1 set₁)
      (set-add! 2 set₁)
      (set-add! 3 set₁)
      set₁)))

;;; UnnestOperandPass

(define (main)
  (= set₁ (make-set))
  (set-add! 1 set₁)
  (set-add! 2 set₁)
  (set-add! 3 set₁)
  (= set₁ (make-set))
  (set-add! 1 set₁)
  (set-add! 2 set₁)
  (set-add! 3 set₁)
  (assert-equal set₁ set₁))

