;;; Input

(define (main)
  (println
   (if (and (equal? (random-dice) 1) (equal? (random-dice) 2))
     0
     42)))

;;; ShrinkPass

(define (main)
  (println
   (if (if (equal? (random-dice) 1) (equal? (random-dice) 2) #f)
     0
     42)))

;;; UniquifyPass

(define (main)
  (println
   (if (if (equal? (random-dice) 1) (equal? (random-dice) 2) #f)
     0
     42)))

;;; RevealGlobalPass

(define (main)
  ((@primitive println 1)
   (if
       (if
           ((@primitive equal? 2) ((@primitive random-dice 0)) 1)
         ((@primitive equal? 2) ((@primitive random-dice 0)) 2)
         #f)
     0
     42)))

;;; LiftLambdaPass

(define (main)
  ((@primitive println 1)
   (if
       (if
           ((@primitive equal? 2) ((@primitive random-dice 0)) 1)
         ((@primitive equal? 2) ((@primitive random-dice 0)) 2)
         #f)
     0
     42)))

;;; UnnestOperandPass

(define (main)
  (@let1 _₁
      (if
          (if
              (@let1 _₂ ((@primitive random-dice 0))
                ((@primitive equal? 2) _₂ 1))
            (@let1 _₃ ((@primitive random-dice 0))
              ((@primitive equal? 2) _₃ 2))
            #f)
        0
        42)
    ((@primitive println 1) _₁)))

