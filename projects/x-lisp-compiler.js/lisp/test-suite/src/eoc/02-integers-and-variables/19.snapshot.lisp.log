;;; Input

(define (main)
  (= x 1)
  (println
   (iadd
    x
    (begin (= x (begin (= x 5) (iadd x x))) (iadd x 100)))))

;;; Loaded

(define (main)
  (= x 1)
  (println
   (iadd
    x
    (begin (= x (begin (= x 5) (iadd x x))) (iadd x 100)))))

;;; ShrinkPass

(define (main)
  (= x 1)
  (println
   (iadd
    x
    (begin (= x (begin (= x 5) (iadd x x))) (iadd x 100)))))

;;; UniquifyPass

(define (main)
  (= x₁ 1)
  (println
   (iadd
    x₁
    (begin
      (= x₂ (begin (= x₃ 5) (iadd x₃ x₃)))
      (iadd x₂ 100)))))

;;; RevealGlobalPass

(define (main)
  (= x₁ 1)
  (println
   (iadd
    x₁
    (begin
      (= x₂ (begin (= x₃ 5) (iadd x₃ x₃)))
      (iadd x₂ 100)))))

;;; LiftLambdaPass

(define (main)
  (= x₁ 1)
  (println
   (iadd
    x₁
    (begin
      (= x₂ (begin (= x₃ 5) (iadd x₃ x₃)))
      (iadd x₂ 100)))))

;;; UnnestOperandPass

(define (main)
  (= x₁ 1)
  (= x₂ (begin (= x₃ 5) (iadd x₃ x₃)))
  (= _₁ (iadd x₂ 100))
  (= _₂ (iadd x₁ _₁))
  (println _₂))

