;;; Input

(define (main) (= x (iadd 42 (ineg 10))) (println (iadd x 10)))

;;; ShrinkPass

(define (main)
  (let ((x (iadd 42 (ineg 10)))) (println (iadd x 10))))

;;; UniquifyPass

(define (main)
  (let ((x₁ (iadd 42 (ineg 10)))) (println (iadd x₁ 10))))

;;; RevealGlobalPass

(define (main)
  (let ((x₁ ((@primitive iadd 2) 42 ((@primitive ineg 1) 10))))
    ((@primitive println 1) ((@primitive iadd 2) x₁ 10))))

;;; LiftLambdaPass

(define (main)
  (let ((x₁ ((@primitive iadd 2) 42 ((@primitive ineg 1) 10))))
    ((@primitive println 1) ((@primitive iadd 2) x₁ 10))))

;;; UnnestOperandPass

(define (main)
  (let
      ((x₁ (let ((_₁ ((@primitive ineg 1) 10)))
             ((@primitive iadd 2) 42 _₁))))
    (let ((_₂ ((@primitive iadd 2) x₁ 10)))
      ((@primitive println 1) _₂))))

