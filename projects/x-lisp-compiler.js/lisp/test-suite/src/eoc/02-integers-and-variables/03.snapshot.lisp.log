;;; Input

(define (main)
  (= y (begin (= x 20) (begin (= z 22) (iadd x z))))
  (println y))

;;; ShrinkPass

(define (main)
  (@let1 y (@let1 x 20 (@let1 z 22 (iadd x z))) (println y)))

;;; UniquifyPass

(define (main)
  (@let1 y₁ (@let1 x₁ 20 (@let1 z₁ 22 (iadd x₁ z₁)))
    (println y₁)))

;;; RevealGlobalPass

(define (main)
  (@let1 y₁
      (@let1 x₁ 20
        (@let1 z₁ 22 ((@primitive-ref iadd 2) x₁ z₁)))
    ((@primitive-ref println 1) y₁)))

;;; LiftLambdaPass

(define (main)
  (@let1 y₁
      (@let1 x₁ 20
        (@let1 z₁ 22 ((@primitive-ref iadd 2) x₁ z₁)))
    ((@primitive-ref println 1) y₁)))

