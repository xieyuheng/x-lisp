;;; Input

(define (main)
  (= y (begin (= x 20) (begin (= z 22) (iadd x z))))
  (println y))

;;; ShrinkPass

(define (main)
  (let ((y (let ((x 20)) (let ((z 22)) (iadd x z)))))
    (println y)))

;;; UniquifyPass

(define (main)
  (let ((y₁ (let ((x₁ 20)) (let ((z₁ 22)) (iadd x₁ z₁)))))
    (println y₁)))

;;; RevealGlobalPass

(define (main)
  (let
      ((y₁ (let ((x₁ 20))
             (let ((z₁ 22)) ((@primitive iadd 2) x₁ z₁)))))
    ((@primitive println 1) y₁)))

;;; LiftLambdaPass

(define (main)
  (let
      ((y₁ (let ((x₁ 20))
             (let ((z₁ 22)) ((@primitive iadd 2) x₁ z₁)))))
    ((@primitive println 1) y₁)))

;;; UnnestOperandPass

(define (main)
  (let
      ((y₁ (let ((x₁ 20))
             (let ((z₁ 22)) ((@primitive iadd 2) x₁ z₁)))))
    ((@primitive println 1) y₁)))

