;;; Input

(claim main (-> void-t))

(define (main)
  (= x 1)
  (println
   (iadd
    x
    (begin (= x (begin (= y 5) (iadd y x))) (iadd x 100)))))

;;; Loaded

(define (main)
  (= x 1)
  (println
   (iadd
    x
    (begin (= x (begin (= y 5) (iadd y x))) (iadd x 100)))))

;;; ShrinkPass

(define (main)
  (= x 1)
  (println
   (iadd
    x
    (begin (= x (begin (= y 5) (iadd y x))) (iadd x 100)))))

;;; UniquifyPass

(define (main)
  (= x₁ 1)
  (println
   (iadd
    x₁
    (begin
      (= x₂ (begin (= y₁ 5) (iadd y₁ x₁)))
      (iadd x₂ 100)))))

;;; LiftLambdaPass

(define (main)
  (= x₁ 1)
  (println
   (iadd
    x₁
    (begin
      (= x₂ (begin (= y₁ 5) (iadd y₁ x₁)))
      (iadd x₂ 100)))))

;;; UnnestOperandPass

(define (main)
  (= x₁ 1)
  (= x₂ (begin (= y₁ 5) (iadd y₁ x₁)))
  (= _₁ (iadd x₂ 100))
  (= _₂ (iadd x₁ _₁))
  (println _₂))

