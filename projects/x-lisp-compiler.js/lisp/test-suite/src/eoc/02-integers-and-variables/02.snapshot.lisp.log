;;; Input

(define (main)
  (= y (begin (= x 20) (iadd x (begin (= x 22) x))))
  (println y))

;;; ShrinkPass

(define (main)
  (@let1 y (@let1 x 20 ((iadd x) (@let1 x 22 x)))
    (println y)))

;;; UniquifyPass

(define (main)
  (@let1 y₁ (@let1 x₁ 20 ((iadd x₁) (@let1 x₂ 22 x₂)))
    (println y₁)))

;;; RevealGlobalPass

(define (main)
  (@let1 y₁
      (@let1 x₁ 20
        (((@primitive-function iadd 2) x₁) (@let1 x₂ 22 x₂)))
    ((@primitive-function println 1) y₁)))

;;; LiftLambdaPass

(define (main)
  (@let1 y₁
      (@let1 x₁ 20
        (((@primitive-function iadd 2) x₁) (@let1 x₂ 22 x₂)))
    ((@primitive-function println 1) y₁)))

