;;; Input

(define (main)
  (= y (begin (= x 20) (iadd x (begin (= x 22) x))))
  (println y))

;;; ShrinkPass

(define (main)
  (let ((y (let ((x 20)) (iadd x (let ((x 22)) x)))))
    (println y)))

;;; UniquifyPass

(define (main)
  (let ((y₁ (let ((x₁ 20)) (iadd x₁ (let ((x₂ 22)) x₂)))))
    (println y₁)))

;;; RevealGlobalPass

(define (main)
  (let
      ((y₁ (let ((x₁ 20))
             ((@primitive iadd 2) x₁ (let ((x₂ 22)) x₂)))))
    ((@primitive println 1) y₁)))

;;; LiftLambdaPass

(define (main)
  (let
      ((y₁ (let ((x₁ 20))
             ((@primitive iadd 2) x₁ (let ((x₂ 22)) x₂)))))
    ((@primitive println 1) y₁)))

;;; UnnestOperandPass

(define (main)
  (let
      ((y₁ (let ((x₁ 20))
             (let ((x₂ 22)) ((@primitive iadd 2) x₁ x₂)))))
    ((@primitive println 1) y₁)))

