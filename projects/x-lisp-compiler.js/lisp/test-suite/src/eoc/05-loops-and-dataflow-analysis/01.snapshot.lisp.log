;;; Input

(define (main)
  (print 1)
  (newline)
  (print 2)
  (newline)
  (print 3)
  (newline)
  666)

;;; ShrinkPass

(define (main)
  (@begin1 (print 1)
    (@begin1 (newline)
      (@begin1 (print 2)
        (@begin1 (newline)
          (@begin1 (print 3) (@begin1 (newline) 666)))))))

;;; UniquifyPass

(define (main)
  (@begin1 (print 1)
    (@begin1 (newline)
      (@begin1 (print 2)
        (@begin1 (newline)
          (@begin1 (print 3) (@begin1 (newline) 666)))))))

;;; RevealGlobalPass

(define (main)
  (@begin1 ((@primitive-ref print 1) 1)
    (@begin1 ((@primitive-ref newline 0))
      (@begin1 ((@primitive-ref print 1) 2)
        (@begin1 ((@primitive-ref newline 0))
          (@begin1 ((@primitive-ref print 1) 3)
            (@begin1 ((@primitive-ref newline 0)) 666)))))))

;;; LiftLambdaPass

(define (main)
  (@begin1 ((@primitive-ref print 1) 1)
    (@begin1 ((@primitive-ref newline 0))
      (@begin1 ((@primitive-ref print 1) 2)
        (@begin1 ((@primitive-ref newline 0))
          (@begin1 ((@primitive-ref print 1) 3)
            (@begin1 ((@primitive-ref newline 0)) 666)))))))

