;;; Input

(define (main)
  (print 1)
  (newline)
  (print 2)
  (newline)
  (print 3)
  (newline)
  666)

;;; ShrinkPass

(define (main)
  (begin
    (print 1)
    (begin
      (newline)
      (begin
        (print 2)
        (begin
          (newline)
          (begin (print 3) (begin (newline) 666)))))))

;;; UniquifyPass

(define (main)
  (begin
    (print 1)
    (begin
      (newline)
      (begin
        (print 2)
        (begin
          (newline)
          (begin (print 3) (begin (newline) 666)))))))

;;; RevealGlobalPass

(define (main)
  (begin
    ((@primitive print 1) 1)
    (begin
      ((@primitive newline 0))
      (begin
        ((@primitive print 1) 2)
        (begin
          ((@primitive newline 0))
          (begin
            ((@primitive print 1) 3)
            (begin ((@primitive newline 0)) 666)))))))

;;; LiftLambdaPass

(define (main)
  (begin
    ((@primitive print 1) 1)
    (begin
      ((@primitive newline 0))
      (begin
        ((@primitive print 1) 2)
        (begin
          ((@primitive newline 0))
          (begin
            ((@primitive print 1) 3)
            (begin ((@primitive newline 0)) 666)))))))

;;; UnnestOperandPass

(define (main)
  (begin
    ((@primitive print 1) 1)
    (begin
      ((@primitive newline 0))
      (begin
        ((@primitive print 1) 2)
        (begin
          ((@primitive newline 0))
          (begin
            ((@primitive print 1) 3)
            (begin ((@primitive newline 0)) 666)))))))

