;;; Input

(define (main)
  (print 1)
  (newline)
  (print 2)
  (newline)
  (print 3)
  (newline)
  666)

;;; ShrinkPass

(define (main)
  (@let1 _∅ (print 1)
    (@let1 _∅ (newline)
      (@let1 _∅ (print 2)
        (@let1 _∅ (newline)
          (@let1 _∅ (print 3) (@let1 _∅ (newline) 666)))))))

;;; UniquifyPass

(define (main)
  (@let1 _∅₁ (print 1)
    (@let1 _∅₂ (newline)
      (@let1 _∅₃ (print 2)
        (@let1 _∅₄ (newline)
          (@let1 _∅₅ (print 3) (@let1 _∅₆ (newline) 666)))))))

;;; RevealGlobalPass

(define (main)
  (@let1 _∅₁ ((@primitive-ref print 1) 1)
    (@let1 _∅₂ ((@primitive-ref newline 0))
      (@let1 _∅₃ ((@primitive-ref print 1) 2)
        (@let1 _∅₄ ((@primitive-ref newline 0))
          (@let1 _∅₅ ((@primitive-ref print 1) 3)
            (@let1 _∅₆ ((@primitive-ref newline 0)) 666)))))))

;;; LiftLambdaPass

(define (main)
  (@let1 _∅₁ ((@primitive-ref print 1) 1)
    (@let1 _∅₂ ((@primitive-ref newline 0))
      (@let1 _∅₃ ((@primitive-ref print 1) 2)
        (@let1 _∅₄ ((@primitive-ref newline 0))
          (@let1 _∅₅ ((@primitive-ref print 1) 3)
            (@let1 _∅₆ ((@primitive-ref newline 0)) 666)))))))

