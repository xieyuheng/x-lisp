;;; Input

(define (main)
  (if
      (begin
        (print 1)
        (newline)
        (print 2)
        (newline)
        (print 3)
        (newline)
        (equal? 1 2))
    (begin (print 111) (newline) (equal? 1 2))
    (begin (print 222) (newline) (equal? 1 2))))

;;; ShrinkPass

(define (main)
  (if
      (@let1 _∅ (print 1)
        (@let1 _∅ (newline)
          (@let1 _∅ (print 2)
            (@let1 _∅ (newline)
              (@let1 _∅ (print 3)
                (@let1 _∅ (newline) ((equal? 1) 2)))))))
    (@let1 _∅ (print 111)
      (@let1 _∅ (newline) ((equal? 1) 2)))
    (@let1 _∅ (print 222)
      (@let1 _∅ (newline) ((equal? 1) 2)))))

;;; UniquifyPass

(define (main)
  (if
      (@let1 _∅₁ (print 1)
        (@let1 _∅₂ (newline)
          (@let1 _∅₃ (print 2)
            (@let1 _∅₄ (newline)
              (@let1 _∅₅ (print 3)
                (@let1 _∅₆ (newline) ((equal? 1) 2)))))))
    (@let1 _∅₁ (print 111)
      (@let1 _∅₂ (newline) ((equal? 1) 2)))
    (@let1 _∅₁ (print 222)
      (@let1 _∅₂ (newline) ((equal? 1) 2)))))

;;; RevealGlobalPass

(define (main)
  (if
      (@let1 _∅₁ ((@primitive-ref print 1) 1)
        (@let1 _∅₂ ((@primitive-ref newline 0))
          (@let1 _∅₃ ((@primitive-ref print 1) 2)
            (@let1 _∅₄ ((@primitive-ref newline 0))
              (@let1 _∅₅ ((@primitive-ref print 1) 3)
                (@let1 _∅₆ ((@primitive-ref newline 0))
                  (((@primitive-ref equal? 2) 1) 2)))))))
    (@let1 _∅₁ ((@primitive-ref print 1) 111)
      (@let1 _∅₂ ((@primitive-ref newline 0))
        (((@primitive-ref equal? 2) 1) 2)))
    (@let1 _∅₁ ((@primitive-ref print 1) 222)
      (@let1 _∅₂ ((@primitive-ref newline 0))
        (((@primitive-ref equal? 2) 1) 2)))))

;;; LiftLambdaPass

(define (main)
  (if
      (@let1 _∅₁ ((@primitive-ref print 1) 1)
        (@let1 _∅₂ ((@primitive-ref newline 0))
          (@let1 _∅₃ ((@primitive-ref print 1) 2)
            (@let1 _∅₄ ((@primitive-ref newline 0))
              (@let1 _∅₅ ((@primitive-ref print 1) 3)
                (@let1 _∅₆ ((@primitive-ref newline 0))
                  (((@primitive-ref equal? 2) 1) 2)))))))
    (@let1 _∅₁ ((@primitive-ref print 1) 111)
      (@let1 _∅₂ ((@primitive-ref newline 0))
        (((@primitive-ref equal? 2) 1) 2)))
    (@let1 _∅₁ ((@primitive-ref print 1) 222)
      (@let1 _∅₂ ((@primitive-ref newline 0))
        (((@primitive-ref equal? 2) 1) 2)))))

