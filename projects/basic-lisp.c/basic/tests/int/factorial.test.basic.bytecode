@define-function factorial
  (local-store 0)
  (local-load 0)
  (literal 1)
  (call int-less-or-equal?)
  (jump-if-not 15)
  (jump 0)
  (literal 1)
  (return)
  (local-load 0)
  (literal 1)
  (call isub)
  (local-store 1)
  (local-load 1)
  (call factorial)
  (local-store 2)
  (local-load 0)
  (local-load 2)
  (tail-call imul)

@define-function main
  (literal 0)
  (call factorial)
  (local-store 0)
  (local-load 0)
  (call println)
  (drop0)
  (literal 1)
  (call factorial)
  (local-store 0)
  (local-load 0)
  (call println)
  (drop0)
  (literal 2)
  (call factorial)
  (local-store 0)
  (local-load 0)
  (call println)
  (drop0)
  (literal 3)
  (call factorial)
  (local-store 0)
  (local-load 0)
  (call println)
  (drop0)
  (literal 4)
  (call factorial)
  (local-store 0)
  (local-load 0)
  (call println)
  (drop0)
  (call void)
  (return)

