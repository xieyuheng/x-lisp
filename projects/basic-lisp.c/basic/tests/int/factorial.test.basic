;; (define (factorial n)
;;   (if (= n 1)
;;     1
;;     (* (factorial (- n 1)) n)))

(define-function (factorial n)
  (block entry
    (branch (equal? n 1)
      (@label base-case)
      (@label recur-case)))
  (block base-case
    (return 1))
  (block recur-case
    (= n1 (isub n 1))
    (= f1 (factorial n1))
    (= r (imul n f1))
    (return r)))
