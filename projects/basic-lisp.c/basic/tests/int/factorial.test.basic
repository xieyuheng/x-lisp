;; (define (factorial n)
;;   (if (int-less-or-equal? n 1)
;;     1
;;     (imul (factorial (isub n 1)) n)))

(define-function (factorial n)
  (block body
    (test (int-less-or-equal? n 1))
    (branch base-case recur-case))
  (block base-case
    (return 1))
  (block recur-case
    (= n1 (isub n 1))
    (= f1 (factorial n1))
    (return (imul n f1))))

(define-function (main)
  (block body
    (= v (factorial 0))
    (perform (println v))
    (= v (factorial 1))
    (perform (println v))
    (= v (factorial 2))
    (perform (println v))
    (= v (factorial 3))
    (perform (println v))
    (= v (factorial 4))
    (perform (println v))
    (return void)))
