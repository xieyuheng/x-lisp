;;; Input

(define (_main)
  (println-non-void
   (begin
     (= x (random-dice))
     (= y (random-dice))
     (iadd
      (if (if (int-less? x 1) (equal? x 0) (equal? x 2))
        (iadd y 2)
        (iadd y 10))
      (if (if (int-less? x 1) (equal? x 0) (equal? x 2))
        (iadd y 2)
        (iadd y 10))))))

;;; ShrinkPass

(define (_main)
  (println-non-void
   (@let1 x (random-dice)
     (@let1 y (random-dice)
       ((iadd
         (if
             (if ((int-less? x) 1)
               ((equal? x) 0)
               ((equal? x) 2))
           ((iadd y) 2)
           ((iadd y) 10)))
        (if
            (if ((int-less? x) 1)
              ((equal? x) 0)
              ((equal? x) 2))
          ((iadd y) 2)
          ((iadd y) 10)))))))

;;; UniquifyPass

(define (_main)
  (println-non-void
   (@let1 x₁ (random-dice)
     (@let1 y₁ (random-dice)
       ((iadd
         (if
             (if ((int-less? x₁) 1)
               ((equal? x₁) 0)
               ((equal? x₁) 2))
           ((iadd y₁) 2)
           ((iadd y₁) 10)))
        (if
            (if ((int-less? x₁) 1)
              ((equal? x₁) 0)
              ((equal? x₁) 2))
          ((iadd y₁) 2)
          ((iadd y₁) 10)))))))

;;; RevealGlobalPass

(define (_main)
  ((@primitive-function println-non-void 1)
   (@let1 x₁ ((@primitive-function random-dice 0))
     (@let1 y₁ ((@primitive-function random-dice 0))
       (((@primitive-function iadd 2)
         (if
             (if (((@primitive-function int-less? 2) x₁) 1)
               (((@primitive-function equal? 2) x₁) 0)
               (((@primitive-function equal? 2) x₁) 2))
           (((@primitive-function iadd 2) y₁) 2)
           (((@primitive-function iadd 2) y₁) 10)))
        (if
            (if (((@primitive-function int-less? 2) x₁) 1)
              (((@primitive-function equal? 2) x₁) 0)
              (((@primitive-function equal? 2) x₁) 2))
          (((@primitive-function iadd 2) y₁) 2)
          (((@primitive-function iadd 2) y₁) 10)))))))

;;; LiftLambdaPass

(define (_main)
  ((@primitive-function println-non-void 1)
   (@let1 x₁ ((@primitive-function random-dice 0))
     (@let1 y₁ ((@primitive-function random-dice 0))
       (((@primitive-function iadd 2)
         (if
             (if (((@primitive-function int-less? 2) x₁) 1)
               (((@primitive-function equal? 2) x₁) 0)
               (((@primitive-function equal? 2) x₁) 2))
           (((@primitive-function iadd 2) y₁) 2)
           (((@primitive-function iadd 2) y₁) 10)))
        (if
            (if (((@primitive-function int-less? 2) x₁) 1)
              (((@primitive-function equal? 2) x₁) 0)
              (((@primitive-function equal? 2) x₁) 2))
          (((@primitive-function iadd 2) y₁) 2)
          (((@primitive-function iadd 2) y₁) 10)))))))

;;; UnnestOperandPass

(define (_main)
  (@let1 _₁ (@primitive-function println-non-void 1)
    (@let1 x₁
        (@let1 _₂ (@primitive-function random-dice 0) (_₂))
      (@let1 y₁
          (@let1 _₃ (@primitive-function random-dice 0)
            (_₃))
        (@let1 _₄ (@primitive-function iadd 2)
          (@let1 _₅
              (@let1 _₆
                  (@let1 _₇
                      (@primitive-function int-less? 2)
                    (@let1 _₈ (_₇ x₁)
                      (@let1 _₉ 1
                        (@let1 _₁₀ (_₈ _₉)
                          (if _₁₀
                            (@let1 _₁₁
                                (@primitive-function
                                 equal?
                                 2)
                              (@let1 _₁₂ (_₁₁ x₁)
                                (@let1 _₁₃ 0 (_₁₂ _₁₃))))
                            (@let1 _₁₄
                                (@primitive-function
                                 equal?
                                 2)
                              (@let1 _₁₅ (_₁₄ x₁)
                                (@let1 _₁₆ 2 (_₁₅ _₁₆)))))))))
                (if _₆
                  (@let1 _₁₇ (@primitive-function iadd 2)
                    (@let1 _₁₈ (_₁₇ y₁)
                      (@let1 _₁₉ 2 (_₁₈ _₁₉))))
                  (@let1 _₂₀ (@primitive-function iadd 2)
                    (@let1 _₂₁ (_₂₀ y₁)
                      (@let1 _₂₂ 10 (_₂₁ _₂₂))))))
            (@let1 _₂₃ (_₄ _₅)
              (@let1 _₂₄
                  (@let1 _₂₅
                      (@let1 _₂₆
                          (@primitive-function int-less? 2)
                        (@let1 _₂₇ (_₂₆ x₁)
                          (@let1 _₂₈ 1
                            (@let1 _₂₉ (_₂₇ _₂₈)
                              (if _₂₉
                                (@let1 _₃₀
                                    (@primitive-function
                                     equal?
                                     2)
                                  (@let1 _₃₁ (_₃₀ x₁)
                                    (@let1 _₃₂ 0 (_₃₁ _₃₂))))
                                (@let1 _₃₃
                                    (@primitive-function
                                     equal?
                                     2)
                                  (@let1 _₃₄ (_₃₃ x₁)
                                    (@let1 _₃₅ 2 (_₃₄ _₃₅)))))))))
                    (if _₂₅
                      (@let1 _₃₆
                          (@primitive-function iadd 2)
                        (@let1 _₃₇ (_₃₆ y₁)
                          (@let1 _₃₈ 2 (_₃₇ _₃₈))))
                      (@let1 _₃₉
                          (@primitive-function iadd 2)
                        (@let1 _₄₀ (_₃₉ y₁)
                          (@let1 _₄₁ 10 (_₄₀ _₄₁))))))
                (@let1 _₄₂ (_₂₃ _₂₄) (_₁ _₄₂))))))))))

;;; ExplicateControlPass

(define-function _main
  (block body
    (= _₁ (literal (@primitive-function println-non-void 1)))
    (= _₂ (literal (@primitive-function random-dice 0)))
    (= x₁ (apply-nullary _₂))
    (= _₃ (literal (@primitive-function random-dice 0)))
    (= y₁ (apply-nullary _₃))
    (= _₄ (literal (@primitive-function iadd 2)))
    (= _₇ (literal (@primitive-function int-less? 2)))
    (= _₈ (apply _₇ x₁))
    (= _₉ (literal 1))
    (= _₁₀ (apply _₈ _₉))
    (branch _₁₀ _main/then₁₁ _main/else₁₂))
  (block _main/let-body₁
    (= _₄₂ (apply _₂₃ _₂₄))
    (= _↩ (apply _₁ _₄₂))
    (return _↩))
  (block _main/then₂
    (= _₃₆ (literal (@primitive-function iadd 2)))
    (= _₃₇ (apply _₃₆ y₁))
    (= _₃₈ (literal 2))
    (= _₂₄ (apply _₃₇ _₃₈))
    (goto _main/let-body₁))
  (block _main/else₃
    (= _₃₉ (literal (@primitive-function iadd 2)))
    (= _₄₀ (apply _₃₉ y₁))
    (= _₄₁ (literal 10))
    (= _₂₄ (apply _₄₀ _₄₁))
    (goto _main/let-body₁))
  (block _main/let-body₄
    (branch _₂₅ _main/then₂ _main/else₃))
  (block _main/then₅
    (= _₃₀ (literal (@primitive-function equal? 2)))
    (= _₃₁ (apply _₃₀ x₁))
    (= _₃₂ (literal 0))
    (= _₂₅ (apply _₃₁ _₃₂))
    (goto _main/let-body₄))
  (block _main/else₆
    (= _₃₃ (literal (@primitive-function equal? 2)))
    (= _₃₄ (apply _₃₃ x₁))
    (= _₃₅ (literal 2))
    (= _₂₅ (apply _₃₄ _₃₅))
    (goto _main/let-body₄))
  (block _main/let-body₇
    (= _₂₃ (apply _₄ _₅))
    (= _₂₆ (literal (@primitive-function int-less? 2)))
    (= _₂₇ (apply _₂₆ x₁))
    (= _₂₈ (literal 1))
    (= _₂₉ (apply _₂₇ _₂₈))
    (branch _₂₉ _main/then₅ _main/else₆))
  (block _main/then₈
    (= _₁₇ (literal (@primitive-function iadd 2)))
    (= _₁₈ (apply _₁₇ y₁))
    (= _₁₉ (literal 2))
    (= _₅ (apply _₁₈ _₁₉))
    (goto _main/let-body₇))
  (block _main/else₉
    (= _₂₀ (literal (@primitive-function iadd 2)))
    (= _₂₁ (apply _₂₀ y₁))
    (= _₂₂ (literal 10))
    (= _₅ (apply _₂₁ _₂₂))
    (goto _main/let-body₇))
  (block _main/let-body₁₀
    (branch _₆ _main/then₈ _main/else₉))
  (block _main/then₁₁
    (= _₁₁ (literal (@primitive-function equal? 2)))
    (= _₁₂ (apply _₁₁ x₁))
    (= _₁₃ (literal 0))
    (= _₆ (apply _₁₂ _₁₃))
    (goto _main/let-body₁₀))
  (block _main/else₁₂
    (= _₁₄ (literal (@primitive-function equal? 2)))
    (= _₁₅ (apply _₁₄ x₁))
    (= _₁₆ (literal 2))
    (= _₆ (apply _₁₅ _₁₆))
    (goto _main/let-body₁₀)))

;;; SelectInstructionPass

(export _setup _main)

(define-code _main
  (block body
    (leaq
     (label-deref (external-label x-println-non-void))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 8) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₁))
    (leaq
     (label-deref (external-label x-random-dice))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 0) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₂))
    (movq (var _₂) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (var x₁))
    (leaq
     (label-deref (external-label x-random-dice))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 0) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₃))
    (movq (var _₃) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (var y₁))
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₄))
    (leaq
     (label-deref (external-label x-int-less?))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₇))
    (movq (var _₇) (reg rdi))
    (movq (var x₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₈))
    (movq (imm 8) (var _₉))
    (movq (var _₈) (reg rdi))
    (movq (var _₉) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₁₀))
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (var _₁₀) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₁₁)
     (label _main/else₁₂)))
  (block _main/let-body₁
    (movq (var _₂₃) (reg rdi))
    (movq (var _₂₄) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₄₂))
    (movq (var _₁) (reg rdi))
    (movq (var _₄₂) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _↩))
    (movq (var _↩) (reg rax))
    (retq))
  (block _main/then₂
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₃₆))
    (movq (var _₃₆) (reg rdi))
    (movq (var y₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₃₇))
    (movq (imm 16) (var _₃₈))
    (movq (var _₃₇) (reg rdi))
    (movq (var _₃₈) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₂₄))
    (jmp (label _main/let-body₁)))
  (block _main/else₃
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₃₉))
    (movq (var _₃₉) (reg rdi))
    (movq (var y₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₄₀))
    (movq (imm 80) (var _₄₁))
    (movq (var _₄₀) (reg rdi))
    (movq (var _₄₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₂₄))
    (jmp (label _main/let-body₁)))
  (block _main/let-body₄
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (var _₂₅) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₂)
     (label _main/else₃)))
  (block _main/then₅
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₃₀))
    (movq (var _₃₀) (reg rdi))
    (movq (var x₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₃₁))
    (movq (imm 0) (var _₃₂))
    (movq (var _₃₁) (reg rdi))
    (movq (var _₃₂) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₂₅))
    (jmp (label _main/let-body₄)))
  (block _main/else₆
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₃₃))
    (movq (var _₃₃) (reg rdi))
    (movq (var x₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₃₄))
    (movq (imm 16) (var _₃₅))
    (movq (var _₃₄) (reg rdi))
    (movq (var _₃₅) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₂₅))
    (jmp (label _main/let-body₄)))
  (block _main/let-body₇
    (movq (var _₄) (reg rdi))
    (movq (var _₅) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₂₃))
    (leaq
     (label-deref (external-label x-int-less?))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₂₆))
    (movq (var _₂₆) (reg rdi))
    (movq (var x₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₂₇))
    (movq (imm 8) (var _₂₈))
    (movq (var _₂₇) (reg rdi))
    (movq (var _₂₈) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₂₉))
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (var _₂₉) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₅)
     (label _main/else₆)))
  (block _main/then₈
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₁₇))
    (movq (var _₁₇) (reg rdi))
    (movq (var y₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₁₈))
    (movq (imm 16) (var _₁₉))
    (movq (var _₁₈) (reg rdi))
    (movq (var _₁₉) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₅))
    (jmp (label _main/let-body₇)))
  (block _main/else₉
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₂₀))
    (movq (var _₂₀) (reg rdi))
    (movq (var y₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₂₁))
    (movq (imm 80) (var _₂₂))
    (movq (var _₂₁) (reg rdi))
    (movq (var _₂₂) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₅))
    (jmp (label _main/let-body₇)))
  (block _main/let-body₁₀
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (var _₆) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₈)
     (label _main/else₉)))
  (block _main/then₁₁
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₁₁))
    (movq (var _₁₁) (reg rdi))
    (movq (var x₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₁₂))
    (movq (imm 0) (var _₁₃))
    (movq (var _₁₂) (reg rdi))
    (movq (var _₁₃) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₆))
    (jmp (label _main/let-body₁₀)))
  (block _main/else₁₂
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (var _₁₄))
    (movq (var _₁₄) (reg rdi))
    (movq (var x₁) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₁₅))
    (movq (imm 16) (var _₁₆))
    (movq (var _₁₅) (reg rdi))
    (movq (var _₁₆) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (var _₆))
    (jmp (label _main/let-body₁₀))))

(define-code _setup (block body))

;;; AssignHomePass

(export _setup _main)

(define-code _main
  (block body
    (leaq
     (label-deref (external-label x-println-non-void))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 8) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -64))
    (leaq
     (label-deref (external-label x-random-dice))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 0) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -72))
    (movq (reg-deref (reg rbp) -72) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (reg-deref (reg rbp) -80))
    (leaq
     (label-deref (external-label x-random-dice))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 0) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -88) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (reg-deref (reg rbp) -96))
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -104))
    (leaq
     (label-deref (external-label x-int-less?))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -112))
    (movq (reg-deref (reg rbp) -112) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -120))
    (movq (imm 8) (reg-deref (reg rbp) -128))
    (movq (reg-deref (reg rbp) -120) (reg rdi))
    (movq (reg-deref (reg rbp) -128) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -136))
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -136) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₁₁)
     (label _main/else₁₂)))
  (block _main/let-body₁
    (movq (reg-deref (reg rbp) -144) (reg rdi))
    (movq (reg-deref (reg rbp) -152) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -160))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -160) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -168))
    (movq (reg-deref (reg rbp) -168) (reg rax))
    (retq))
  (block _main/then₂
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -176))
    (movq (reg-deref (reg rbp) -176) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -184))
    (movq (imm 16) (reg-deref (reg rbp) -192))
    (movq (reg-deref (reg rbp) -184) (reg rdi))
    (movq (reg-deref (reg rbp) -192) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -152))
    (jmp (label _main/let-body₁)))
  (block _main/else₃
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -200))
    (movq (reg-deref (reg rbp) -200) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -208))
    (movq (imm 80) (reg-deref (reg rbp) -216))
    (movq (reg-deref (reg rbp) -208) (reg rdi))
    (movq (reg-deref (reg rbp) -216) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -152))
    (jmp (label _main/let-body₁)))
  (block _main/let-body₄
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -224) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₂)
     (label _main/else₃)))
  (block _main/then₅
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -232))
    (movq (reg-deref (reg rbp) -232) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -240))
    (movq (imm 0) (reg-deref (reg rbp) -248))
    (movq (reg-deref (reg rbp) -240) (reg rdi))
    (movq (reg-deref (reg rbp) -248) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -224))
    (jmp (label _main/let-body₄)))
  (block _main/else₆
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -256))
    (movq (reg-deref (reg rbp) -256) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -264))
    (movq (imm 16) (reg-deref (reg rbp) -272))
    (movq (reg-deref (reg rbp) -264) (reg rdi))
    (movq (reg-deref (reg rbp) -272) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -224))
    (jmp (label _main/let-body₄)))
  (block _main/let-body₇
    (movq (reg-deref (reg rbp) -104) (reg rdi))
    (movq (reg-deref (reg rbp) -280) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -144))
    (leaq
     (label-deref (external-label x-int-less?))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -288))
    (movq (reg-deref (reg rbp) -288) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -296))
    (movq (imm 8) (reg-deref (reg rbp) -304))
    (movq (reg-deref (reg rbp) -296) (reg rdi))
    (movq (reg-deref (reg rbp) -304) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -312))
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -312) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₅)
     (label _main/else₆)))
  (block _main/then₈
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -320))
    (movq (reg-deref (reg rbp) -320) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -328))
    (movq (imm 16) (reg-deref (reg rbp) -336))
    (movq (reg-deref (reg rbp) -328) (reg rdi))
    (movq (reg-deref (reg rbp) -336) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -280))
    (jmp (label _main/let-body₇)))
  (block _main/else₉
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -344))
    (movq (reg-deref (reg rbp) -344) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -352))
    (movq (imm 80) (reg-deref (reg rbp) -360))
    (movq (reg-deref (reg rbp) -352) (reg rdi))
    (movq (reg-deref (reg rbp) -360) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -280))
    (jmp (label _main/let-body₇)))
  (block _main/let-body₁₀
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -368) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₈)
     (label _main/else₉)))
  (block _main/then₁₁
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -376))
    (movq (reg-deref (reg rbp) -376) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -384))
    (movq (imm 0) (reg-deref (reg rbp) -392))
    (movq (reg-deref (reg rbp) -384) (reg rdi))
    (movq (reg-deref (reg rbp) -392) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -368))
    (jmp (label _main/let-body₁₀)))
  (block _main/else₁₂
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -400))
    (movq (reg-deref (reg rbp) -400) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -408))
    (movq (imm 16) (reg-deref (reg rbp) -416))
    (movq (reg-deref (reg rbp) -408) (reg rdi))
    (movq (reg-deref (reg rbp) -416) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -368))
    (jmp (label _main/let-body₁₀))))

(define-code _setup (block body))

;;; PatchInstructionPass

(export _setup _main)

(define-code _main
  (block body
    (leaq
     (label-deref (external-label x-println-non-void))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 8) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -64))
    (leaq
     (label-deref (external-label x-random-dice))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 0) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -72))
    (movq (reg-deref (reg rbp) -72) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (reg-deref (reg rbp) -80))
    (leaq
     (label-deref (external-label x-random-dice))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 0) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -88) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (reg-deref (reg rbp) -96))
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -104))
    (leaq
     (label-deref (external-label x-int-less?))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -112))
    (movq (reg-deref (reg rbp) -112) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -120))
    (movq (imm 8) (reg-deref (reg rbp) -128))
    (movq (reg-deref (reg rbp) -120) (reg rdi))
    (movq (reg-deref (reg rbp) -128) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -136))
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -136) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₁₁)
     (label _main/else₁₂)))
  (block _main/let-body₁
    (movq (reg-deref (reg rbp) -144) (reg rdi))
    (movq (reg-deref (reg rbp) -152) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -160))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -160) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -168))
    (movq (reg-deref (reg rbp) -168) (reg rax))
    (retq))
  (block _main/then₂
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -176))
    (movq (reg-deref (reg rbp) -176) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -184))
    (movq (imm 16) (reg-deref (reg rbp) -192))
    (movq (reg-deref (reg rbp) -184) (reg rdi))
    (movq (reg-deref (reg rbp) -192) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -152))
    (jmp (label _main/let-body₁)))
  (block _main/else₃
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -200))
    (movq (reg-deref (reg rbp) -200) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -208))
    (movq (imm 80) (reg-deref (reg rbp) -216))
    (movq (reg-deref (reg rbp) -208) (reg rdi))
    (movq (reg-deref (reg rbp) -216) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -152))
    (jmp (label _main/let-body₁)))
  (block _main/let-body₄
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -224) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₂)
     (label _main/else₃)))
  (block _main/then₅
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -232))
    (movq (reg-deref (reg rbp) -232) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -240))
    (movq (imm 0) (reg-deref (reg rbp) -248))
    (movq (reg-deref (reg rbp) -240) (reg rdi))
    (movq (reg-deref (reg rbp) -248) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -224))
    (jmp (label _main/let-body₄)))
  (block _main/else₆
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -256))
    (movq (reg-deref (reg rbp) -256) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -264))
    (movq (imm 16) (reg-deref (reg rbp) -272))
    (movq (reg-deref (reg rbp) -264) (reg rdi))
    (movq (reg-deref (reg rbp) -272) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -224))
    (jmp (label _main/let-body₄)))
  (block _main/let-body₇
    (movq (reg-deref (reg rbp) -104) (reg rdi))
    (movq (reg-deref (reg rbp) -280) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -144))
    (leaq
     (label-deref (external-label x-int-less?))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -288))
    (movq (reg-deref (reg rbp) -288) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -296))
    (movq (imm 8) (reg-deref (reg rbp) -304))
    (movq (reg-deref (reg rbp) -296) (reg rdi))
    (movq (reg-deref (reg rbp) -304) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -312))
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -312) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₅)
     (label _main/else₆)))
  (block _main/then₈
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -320))
    (movq (reg-deref (reg rbp) -320) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -328))
    (movq (imm 16) (reg-deref (reg rbp) -336))
    (movq (reg-deref (reg rbp) -328) (reg rdi))
    (movq (reg-deref (reg rbp) -336) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -280))
    (jmp (label _main/let-body₇)))
  (block _main/else₉
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -344))
    (movq (reg-deref (reg rbp) -344) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -352))
    (movq (imm 80) (reg-deref (reg rbp) -360))
    (movq (reg-deref (reg rbp) -352) (reg rdi))
    (movq (reg-deref (reg rbp) -360) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -280))
    (jmp (label _main/let-body₇)))
  (block _main/let-body₁₀
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -368) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₈)
     (label _main/else₉)))
  (block _main/then₁₁
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -376))
    (movq (reg-deref (reg rbp) -376) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -384))
    (movq (imm 0) (reg-deref (reg rbp) -392))
    (movq (reg-deref (reg rbp) -384) (reg rdi))
    (movq (reg-deref (reg rbp) -392) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -368))
    (jmp (label _main/let-body₁₀)))
  (block _main/else₁₂
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -400))
    (movq (reg-deref (reg rbp) -400) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -408))
    (movq (imm 16) (reg-deref (reg rbp) -416))
    (movq (reg-deref (reg rbp) -408) (reg rdi))
    (movq (reg-deref (reg rbp) -416) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -368))
    (jmp (label _main/let-body₁₀))))

(define-code _setup (block body))

;;; PrologAndEpilogPass

(export _setup _main)

(define-code _main
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 416) (reg rsp))
    (jmp (label body)))
  (block body
    (leaq
     (label-deref (external-label x-println-non-void))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 8) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -64))
    (leaq
     (label-deref (external-label x-random-dice))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 0) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -72))
    (movq (reg-deref (reg rbp) -72) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (reg-deref (reg rbp) -80))
    (leaq
     (label-deref (external-label x-random-dice))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 0) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -88) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (reg-deref (reg rbp) -96))
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -104))
    (leaq
     (label-deref (external-label x-int-less?))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -112))
    (movq (reg-deref (reg rbp) -112) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -120))
    (movq (imm 8) (reg-deref (reg rbp) -128))
    (movq (reg-deref (reg rbp) -120) (reg rdi))
    (movq (reg-deref (reg rbp) -128) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -136))
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -136) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₁₁)
     (label _main/else₁₂)))
  (block _main/let-body₁
    (movq (reg-deref (reg rbp) -144) (reg rdi))
    (movq (reg-deref (reg rbp) -152) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -160))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -160) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -168))
    (movq (reg-deref (reg rbp) -168) (reg rax))
    (jmp (label epilog)))
  (block _main/then₂
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -176))
    (movq (reg-deref (reg rbp) -176) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -184))
    (movq (imm 16) (reg-deref (reg rbp) -192))
    (movq (reg-deref (reg rbp) -184) (reg rdi))
    (movq (reg-deref (reg rbp) -192) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -152))
    (jmp (label _main/let-body₁)))
  (block _main/else₃
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -200))
    (movq (reg-deref (reg rbp) -200) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -208))
    (movq (imm 80) (reg-deref (reg rbp) -216))
    (movq (reg-deref (reg rbp) -208) (reg rdi))
    (movq (reg-deref (reg rbp) -216) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -152))
    (jmp (label _main/let-body₁)))
  (block _main/let-body₄
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -224) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₂)
     (label _main/else₃)))
  (block _main/then₅
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -232))
    (movq (reg-deref (reg rbp) -232) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -240))
    (movq (imm 0) (reg-deref (reg rbp) -248))
    (movq (reg-deref (reg rbp) -240) (reg rdi))
    (movq (reg-deref (reg rbp) -248) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -224))
    (jmp (label _main/let-body₄)))
  (block _main/else₆
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -256))
    (movq (reg-deref (reg rbp) -256) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -264))
    (movq (imm 16) (reg-deref (reg rbp) -272))
    (movq (reg-deref (reg rbp) -264) (reg rdi))
    (movq (reg-deref (reg rbp) -272) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -224))
    (jmp (label _main/let-body₄)))
  (block _main/let-body₇
    (movq (reg-deref (reg rbp) -104) (reg rdi))
    (movq (reg-deref (reg rbp) -280) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -144))
    (leaq
     (label-deref (external-label x-int-less?))
     (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -288))
    (movq (reg-deref (reg rbp) -288) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -296))
    (movq (imm 8) (reg-deref (reg rbp) -304))
    (movq (reg-deref (reg rbp) -296) (reg rdi))
    (movq (reg-deref (reg rbp) -304) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -312))
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -312) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₅)
     (label _main/else₆)))
  (block _main/then₈
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -320))
    (movq (reg-deref (reg rbp) -320) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -328))
    (movq (imm 16) (reg-deref (reg rbp) -336))
    (movq (reg-deref (reg rbp) -328) (reg rdi))
    (movq (reg-deref (reg rbp) -336) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -280))
    (jmp (label _main/let-body₇)))
  (block _main/else₉
    (leaq (label-deref (external-label x-iadd)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -344))
    (movq (reg-deref (reg rbp) -344) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -352))
    (movq (imm 80) (reg-deref (reg rbp) -360))
    (movq (reg-deref (reg rbp) -352) (reg rdi))
    (movq (reg-deref (reg rbp) -360) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -280))
    (jmp (label _main/let-body₇)))
  (block _main/let-body₁₀
    (movq (label-deref (external-label x-true)) (reg rax))
    (cmpq (reg-deref (reg rbp) -368) (reg rax))
    (branch-if
     (cc e)
     (label _main/then₈)
     (label _main/else₉)))
  (block _main/then₁₁
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -376))
    (movq (reg-deref (reg rbp) -376) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -384))
    (movq (imm 0) (reg-deref (reg rbp) -392))
    (movq (reg-deref (reg rbp) -384) (reg rdi))
    (movq (reg-deref (reg rbp) -392) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -368))
    (jmp (label _main/let-body₁₀)))
  (block _main/else₁₂
    (leaq (label-deref (external-label x-equal?)) (reg rdi))
    (orq (imm 3) (reg rdi))
    (movq (imm 16) (reg rsi))
    (movq (imm 0) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -400))
    (movq (reg-deref (reg rbp) -400) (reg rdi))
    (movq (reg-deref (reg rbp) -80) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -408))
    (movq (imm 16) (reg-deref (reg rbp) -416))
    (movq (reg-deref (reg rbp) -408) (reg rdi))
    (movq (reg-deref (reg rbp) -416) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -368))
    (jmp (label _main/let-body₁₀)))
  (block epilog
    (addq (imm 416) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

(define-code _setup
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 56) (reg rsp))
    (jmp (label body)))
  (block body)
  (block epilog
    (addq (imm 56) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

