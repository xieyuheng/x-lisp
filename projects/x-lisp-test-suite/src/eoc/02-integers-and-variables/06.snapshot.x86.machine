(export _setup _main)

(define-code _main
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 104) (reg rsp))
    (jmp (label body)))
  (block body
    (movq
     (label-deref (label println-non-void©constant))
     (reg rax))
    (movq (reg rax) (reg-deref (reg rbp) -64))
    (movq (label-deref (label ineg©constant)) (reg rax))
    (movq (reg rax) (reg-deref (reg rbp) -72))
    (movq
     (label-deref (label random-dice©constant))
     (reg rax))
    (movq (reg rax) (reg-deref (reg rbp) -80))
    (movq (reg-deref (reg rbp) -80) (reg rdi))
    (callq-n (external-label x-apply-nullary) (arity 1))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -72) (reg rdi))
    (movq (reg-deref (reg rbp) -88) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -96))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -96) (reg rsi))
    (callq-n (external-label x-apply-unary) (arity 2))
    (movq (reg rax) (reg-deref (reg rbp) -104))
    (movq (reg-deref (reg rbp) -104) (reg rax))
    (jmp (label epilog)))
  (block epilog
    (addq (imm 104) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

(define-data _main©metadata
  (pointer _main©metadata/name)
  (int 0)
  (int 0)
  (pointer _main©variable-info))

(define-data _main©metadata/name (string "_main"))

(define-data _main©variable-info
  (int 6)
  (pointer _main©variable-info/names))

(define-space _main©constant 8)

(define-code _main©setup
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 88) (reg rsp))
    (jmp (label body)))
  (block body
    (movq
     (label-imm (label _main))
     (reg-deref (reg rbp) -64))
    (orq (imm 3) (reg-deref (reg rbp) -64))
    (movq (imm 0) (reg-deref (reg rbp) -72))
    (movq (imm 0) (reg-deref (reg rbp) -80))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -72) (reg rsi))
    (movq (reg-deref (reg rbp) -80) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -88) (reg rax))
    (movq (reg rax) (label-deref (label _main©constant)))
    (jmp (label epilog)))
  (block epilog
    (addq (imm 88) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

(define-data println-non-void©metadata
  (pointer println-non-void©metadata/name)
  (int 1)
  (int 1)
  (int 0))

(define-data println-non-void©metadata/name
  (string "println-non-void"))

(define-space println-non-void©constant 8)

(define-code println-non-void©setup
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 88) (reg rsp))
    (jmp (label body)))
  (block body
    (movq
     (label-imm (external-label x-println-non-void))
     (reg-deref (reg rbp) -64))
    (orq (imm 3) (reg-deref (reg rbp) -64))
    (movq (imm 8) (reg-deref (reg rbp) -72))
    (movq (imm 0) (reg-deref (reg rbp) -80))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -72) (reg rsi))
    (movq (reg-deref (reg rbp) -80) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -88) (reg rax))
    (movq
     (reg rax)
     (label-deref (label println-non-void©constant)))
    (jmp (label epilog)))
  (block epilog
    (addq (imm 88) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

(define-data ineg©metadata
  (pointer ineg©metadata/name)
  (int 1)
  (int 1)
  (int 0))

(define-data ineg©metadata/name (string "ineg"))

(define-space ineg©constant 8)

(define-code ineg©setup
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 88) (reg rsp))
    (jmp (label body)))
  (block body
    (movq
     (label-imm (external-label x-ineg))
     (reg-deref (reg rbp) -64))
    (orq (imm 3) (reg-deref (reg rbp) -64))
    (movq (imm 8) (reg-deref (reg rbp) -72))
    (movq (imm 0) (reg-deref (reg rbp) -80))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -72) (reg rsi))
    (movq (reg-deref (reg rbp) -80) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -88) (reg rax))
    (movq (reg rax) (label-deref (label ineg©constant)))
    (jmp (label epilog)))
  (block epilog
    (addq (imm 88) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

(define-data make-curry©metadata
  (pointer make-curry©metadata/name)
  (int 3)
  (int 1)
  (int 0))

(define-data make-curry©metadata/name (string "make-curry"))

(define-space make-curry©constant 8)

(define-code make-curry©setup
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 88) (reg rsp))
    (jmp (label body)))
  (block body
    (movq
     (label-imm (external-label x-make-curry))
     (reg-deref (reg rbp) -64))
    (orq (imm 3) (reg-deref (reg rbp) -64))
    (movq (imm 24) (reg-deref (reg rbp) -72))
    (movq (imm 0) (reg-deref (reg rbp) -80))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -72) (reg rsi))
    (movq (reg-deref (reg rbp) -80) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -88) (reg rax))
    (movq
     (reg rax)
     (label-deref (label make-curry©constant)))
    (jmp (label epilog)))
  (block epilog
    (addq (imm 88) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

(define-data random-dice©metadata
  (pointer random-dice©metadata/name)
  (int 0)
  (int 1)
  (int 0))

(define-data random-dice©metadata/name
  (string "random-dice"))

(define-space random-dice©constant 8)

(define-code random-dice©setup
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 88) (reg rsp))
    (jmp (label body)))
  (block body
    (movq
     (label-imm (external-label x-random-dice))
     (reg-deref (reg rbp) -64))
    (orq (imm 3) (reg-deref (reg rbp) -64))
    (movq (imm 0) (reg-deref (reg rbp) -72))
    (movq (imm 0) (reg-deref (reg rbp) -80))
    (movq (reg-deref (reg rbp) -64) (reg rdi))
    (movq (reg-deref (reg rbp) -72) (reg rsi))
    (movq (reg-deref (reg rbp) -80) (reg rdx))
    (callq-n (external-label x-make-curry) (arity 3))
    (movq (reg rax) (reg-deref (reg rbp) -88))
    (movq (reg-deref (reg rbp) -88) (reg rax))
    (movq
     (reg rax)
     (label-deref (label random-dice©constant)))
    (jmp (label epilog)))
  (block epilog
    (addq (imm 88) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

(define-code _setup
  (block prolog
    (pushq (reg rbp))
    (movq (reg rsp) (reg rbp))
    (pushq (reg rsp))
    (pushq (reg rbp))
    (pushq (reg rbx))
    (pushq (reg r12))
    (pushq (reg r13))
    (pushq (reg r14))
    (pushq (reg r15))
    (subq (imm 64) (reg rsp))
    (jmp (label body)))
  (block body
    (callq-n (label _main©setup) (arity 0))
    (movq (reg rax) (reg-deref (reg rbp) -64))
    (callq-n (label println-non-void©setup) (arity 0))
    (movq (reg rax) (reg-deref (reg rbp) -64))
    (callq-n (label ineg©setup) (arity 0))
    (movq (reg rax) (reg-deref (reg rbp) -64))
    (callq-n (label make-curry©setup) (arity 0))
    (movq (reg rax) (reg-deref (reg rbp) -64))
    (callq-n (label random-dice©setup) (arity 0))
    (movq (reg rax) (reg-deref (reg rbp) -64)))
  (block epilog
    (addq (imm 64) (reg rsp))
    (popq (reg r15))
    (popq (reg r14))
    (popq (reg r13))
    (popq (reg r12))
    (popq (reg rbx))
    (popq (reg rbp))
    (popq (reg rsp))
    (popq (reg rbp))
    (retq)))

(define-data _main©variable-info/names
  (pointer _main©variable-info/names/0)
  (pointer _main©variable-info/names/1)
  (pointer _main©variable-info/names/2)
  (pointer _main©variable-info/names/3)
  (pointer _main©variable-info/names/4)
  (pointer _main©variable-info/names/5))

(define-data _main©variable-info/names/0 (string "_₁"))

(define-data _main©variable-info/names/1 (string "_₂"))

(define-data _main©variable-info/names/2 (string "_₃"))

(define-data _main©variable-info/names/3 (string "_₄"))

(define-data _main©variable-info/names/4 (string "_₅"))

(define-data _main©variable-info/names/5 (string "_↩"))

(define-data _main©setup©variable-info
  (int 4)
  (pointer _main©setup©variable-info/names))

(define-data _main©setup©variable-info/names
  (pointer _main©setup©variable-info/names/0)
  (pointer _main©setup©variable-info/names/1)
  (pointer _main©setup©variable-info/names/2)
  (pointer _main©setup©variable-info/names/3))

(define-data _main©setup©variable-info/names/0
  (string "address"))

(define-data _main©setup©variable-info/names/1
  (string "arity"))

(define-data _main©setup©variable-info/names/2
  (string "size"))

(define-data _main©setup©variable-info/names/3
  (string "curry"))

(define-data println-non-void©setup©variable-info
  (int 4)
  (pointer println-non-void©setup©variable-info/names))

(define-data println-non-void©setup©variable-info/names
  (pointer println-non-void©setup©variable-info/names/0)
  (pointer println-non-void©setup©variable-info/names/1)
  (pointer println-non-void©setup©variable-info/names/2)
  (pointer println-non-void©setup©variable-info/names/3))

(define-data println-non-void©setup©variable-info/names/0
  (string "address"))

(define-data println-non-void©setup©variable-info/names/1
  (string "arity"))

(define-data println-non-void©setup©variable-info/names/2
  (string "size"))

(define-data println-non-void©setup©variable-info/names/3
  (string "curry"))

(define-data ineg©setup©variable-info
  (int 4)
  (pointer ineg©setup©variable-info/names))

(define-data ineg©setup©variable-info/names
  (pointer ineg©setup©variable-info/names/0)
  (pointer ineg©setup©variable-info/names/1)
  (pointer ineg©setup©variable-info/names/2)
  (pointer ineg©setup©variable-info/names/3))

(define-data ineg©setup©variable-info/names/0
  (string "address"))

(define-data ineg©setup©variable-info/names/1
  (string "arity"))

(define-data ineg©setup©variable-info/names/2
  (string "size"))

(define-data ineg©setup©variable-info/names/3
  (string "curry"))

(define-data make-curry©setup©variable-info
  (int 4)
  (pointer make-curry©setup©variable-info/names))

(define-data make-curry©setup©variable-info/names
  (pointer make-curry©setup©variable-info/names/0)
  (pointer make-curry©setup©variable-info/names/1)
  (pointer make-curry©setup©variable-info/names/2)
  (pointer make-curry©setup©variable-info/names/3))

(define-data make-curry©setup©variable-info/names/0
  (string "address"))

(define-data make-curry©setup©variable-info/names/1
  (string "arity"))

(define-data make-curry©setup©variable-info/names/2
  (string "size"))

(define-data make-curry©setup©variable-info/names/3
  (string "curry"))

(define-data random-dice©setup©variable-info
  (int 4)
  (pointer random-dice©setup©variable-info/names))

(define-data random-dice©setup©variable-info/names
  (pointer random-dice©setup©variable-info/names/0)
  (pointer random-dice©setup©variable-info/names/1)
  (pointer random-dice©setup©variable-info/names/2)
  (pointer random-dice©setup©variable-info/names/3))

(define-data random-dice©setup©variable-info/names/0
  (string "address"))

(define-data random-dice©setup©variable-info/names/1
  (string "arity"))

(define-data random-dice©setup©variable-info/names/2
  (string "size"))

(define-data random-dice©setup©variable-info/names/3
  (string "curry"))

(define-data _setup©variable-info
  (int 1)
  (pointer _setup©variable-info/names))

(define-data _setup©variable-info/names
  (pointer _setup©variable-info/names/0))

(define-data _setup©variable-info/names/0 (string "_"))
