(define-function identity
  (block body (= x (argument 0)) (return x)))

(define-function swap
  (block body
    (= f (argument 0))
    (= x (argument 1))
    (= y (argument 2))
    (= _₁ (apply f y))
    (= _↩ (apply _₁ x))
    (return _↩)))

(define-function drop
  (block body
    (= f (argument 0))
    (= _₁ (const (@primitive-function curry-put! 3)))
    (= _₂ (const 0))
    (= _₃ (apply _₁ _₂))
    (= _₄ (apply _₃ f))
    (= _₅ (const (@primitive-function make-curry 3)))
    (= _₆ (const (@function drop/λ₁ 2)))
    (= _₇ (apply _₅ _₆))
    (= _₈ (const 2))
    (= _₉ (apply _₇ _₈))
    (= _₁₀ (const 1))
    (= _₁₁ (apply _₉ _₁₀))
    (= _↩ (apply _₄ _₁₁))
    (return _↩)))

(define-function drop/λ₁
  (block body
    (= f (argument 0))
    (= dropped₁ (argument 1))
    (= _₁ (const (@primitive-function curry-put! 3)))
    (= _₂ (const 0))
    (= _₃ (apply _₁ _₂))
    (= _₄ (apply _₃ f))
    (= _₅ (const (@primitive-function make-curry 3)))
    (= _₆ (const (@function drop/λ₁/λ₁ 2)))
    (= _₇ (apply _₅ _₆))
    (= _₈ (const 2))
    (= _₉ (apply _₇ _₈))
    (= _₁₀ (const 1))
    (= _₁₁ (apply _₉ _₁₀))
    (= _↩ (apply _₄ _₁₁))
    (return _↩)))

(define-function drop/λ₁/λ₁
  (block body
    (= f (argument 0))
    (= x₁ (argument 1))
    (= _↩ (apply f x₁))
    (return _↩)))

(define-function dup
  (block body
    (= f (argument 0))
    (= _₁ (const (@primitive-function curry-put! 3)))
    (= _₂ (const 0))
    (= _₃ (apply _₁ _₂))
    (= _₄ (apply _₃ f))
    (= _₅ (const (@primitive-function make-curry 3)))
    (= _₆ (const (@function dup/λ₁ 2)))
    (= _₇ (apply _₅ _₆))
    (= _₈ (const 2))
    (= _₉ (apply _₇ _₈))
    (= _₁₀ (const 1))
    (= _₁₁ (apply _₉ _₁₀))
    (= _↩ (apply _₄ _₁₁))
    (return _↩)))

(define-function dup/λ₁
  (block body
    (= f (argument 0))
    (= x₁ (argument 1))
    (= _₁ (apply f x₁))
    (= _↩ (apply _₁ x₁))
    (return _↩)))

(define-function main
  (block body
    (= _₁ (const (@primitive-function println-non-void 1)))
    (= f₁ (const (@primitive-function identity 1)))
    (= _₂ (const (@function dup 1)))
    (= _₃ (const (@primitive-function identity 1)))
    (= g₁ (apply _₂ _₃))
    (= _₄ (apply g₁ f₁))
    (= _₅ (apply _₄ f₁))
    (= _↩ (apply _₁ _₅))
    (return _↩)))
